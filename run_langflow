#!/bin/bash

# Check if .env file exists and contains the required values
if [ ! -f ".env" ]; then
  echo ".env file with Supabase credentials is missing! Please run the extraction script."
  exit 1
fi

# Load environment variables from .env file
echo "Loading environment variables for Langflow..."
export $(grep -v '^#' .env | xargs)

# Start Langflow with Supabase credentials
echo "Starting Langflow with Supabase integration..."
docker-compose up -d langflow studio kong db

# Verify that Langflow is running
if [ "$(docker inspect -f '{{.State.Running}}' langflow)" == "true" ]; then
  echo "Langflow and Supabase are running!"
else
  echo "Failed to start Langflow."
fi
